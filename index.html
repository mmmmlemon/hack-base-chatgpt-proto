<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.15/dist/tailwind.min.css" rel="stylesheet">
  <style>
    /* Custom styles */
    body {
      background-color: #e6dfd2;
    }

    #main-menu {
      /* Existing styles */
      background-color: #b6a27c; /* Restore the background color */
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-start; /* Align items to the left */
      padding: 5%; /* Add padding */
    }

    .menu-item {
      /* Existing styles */
      flex: 0 0 16.66%; /* Set each item to occupy 16.66% of the container width (6 items per line) */
      box-sizing: border-box;
      font-weight: bold;
      margin-bottom: 2%;
      margin-left: 2px;
      margin-right: 2px;
      text-align: center;
      background-color: rgba(100,100,100, 0.6);
    }

    .menu-item:hover {
      background-color: #414135;
    }

    .block {
      background-color: #f8f8f3;
      padding: 5%;
    }

    .submenu-link {
      display: block;
      margin-bottom: 0.5rem;
      color: #000;
    }

    h3{
      font-weight: bold !important;
    }

    .codeExample {
      background-color: #1e1e1e;
      color: #d4d4d4;
      font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
      font-size: 14px;
      padding: 10px;
      border-radius: 4px;
      line-height: 1.5;
    }

    .codeExample span.keyword {
      color: #569cd6;
      font-weight: bold;
    }

    .codeExample span.comment {
      color: #6a9955;
      font-style: italic;
    }

    .codeExample span.string {
      color: #ce9178;
    }

    .codeExample span.number {
      color: #b5cea8;
    }

    .codeExample span.operator {
      color: #d4d4d4;
    }

  </style>
  <title>База знаний</title>
</head>
<body>
  <div id="container" class="max-w-5xl mx-auto px-4">
    <header id="main-menu" class="bg-b6a27c text-white py-4 flex justify-between">
      <!-- Menu content will be generated dynamically -->
    </header>

    <div id="content" class="mt-4">

      <!-- Chrome -->
      <div id="block-1" class="mb-4 block">
        <h2 class="text-xl font-bold mb-2">Chrome</h2>
        <ul>
          <li class="italic cursor-pointer text-blue-900"><a href="#header-p-1-1">> smooth-scroll</a></li>
          <li class="italic cursor-pointer text-blue-900"><a href="#header-p-1-2">> Убрать выделение элемента в Android, Google Assistant</a></li>
        </ul>

        <h3 id="header-p-1-1" class="block-submenu-item mt-10">▼ smooth-scroll</h3>
        <p id="p-1-1" class="mb-2">smooth-scroll в Chrome не работает так как надо. Поэтому это свойство лучше не использовать.</p>
        <h3 id="header-p-1-2" class="block-submenu-item mt-10">▼ Убрать выделение элемента в Android, Google Assistant</h3>
        <p id="p-1-2" class="mb-2">Если в мобильном Chrome при нажатии на элемент он выделяется и появляется Google Assistant, то нужно убрать выделение (CSS -webkit-tap-highlight-color: transparent;) и сделать pointer-events: none;</p>
      </div>

      <!-- Vite -->
      <div id="block-2" class="mb-4 block">
        <h2 class="text-xl font-bold mb-2">Vite</h2>
        <ul>
          <li class="italic cursor-pointer text-blue-900"><a href="#header-p-2-1">> Команда для сборки</a></li>
          <li class="italic cursor-pointer text-blue-900"><a href="#header-p-2-2">> Если сайт не запускается на хосте</a></li>
        </ul>
        <h3 id="header-p-2-1" class="block-submenu-item mt-10">▼ Команда для сборки</h3>
        <p id="p-2-1" class="mb-2 codeExample"><span class="number">npm run build</span></p>
        <h3 id="header-p-2-2" class="block-submenu-item mt-10">▼ Если сайт не запускается на хосте</h3>
        <p id="p-2-2" class="mb-2">Если после сборки сайт не запускается на хосте и выводит ошибку MIME-типа, то нужно убрать первый «/» из ссылок на скрипты в index.html</p>
      </div>

    
      <!-- JS. Axios -->
      <div id="block-3" class="mb-4 block">
        <h2 class="text-xl font-bold mb-2">JS. Axios</h2>
        <ul>
          <li class="italic cursor-pointer text-blue-900"><a href="#header-p-3-1">> Отмена запросов</a></li>
        </ul>
        <h3 id="header-p-3-1" class="block-submenu-item mt-10">▼ Отмена запросов</h3>
        <p id="p-3-1" class="mb-2">Для того чтобы отменить отправленный запрос нужно использовать CancelToken. Для этого нужно создать CancelToken после чего использовать его в параметрах axios запроса. Данный способ является deprecated, но на конец 22-ого – начало 23-его года он всё ещё используется. В будущем CancelToken будет заменён на AbortController.</p>
      </div>

      <!-- Vue -->
      <div id="block-4" class="mb-4 block">
        <h2 class="text-xl font-bold mb-2">Vue</h2>
        <ul>
          <li class="italic cursor-pointer text-blue-900"><a href="#header-p-4-1">> Скопировать атрибут в data без реактивности (костыль)</a></li>
        </ul>
        <h3 id="header-p-4-1" class="block-submenu-item mt-10">▼ Скопировать атрибут в data без реактивности (костыль)</h3>
        <p id="p-4-1" class="mb-2 codeExample">
          <span class="string">атрибут</span> = <span class="keyword">JSON</span>.<span class="keyword">parse</span>(<span class="keyword">JSON</span>.<span class="keyword">stringify</span>( данные ));</span>
        </p>
        <p>Иногда нужно скопировать данные из атрибута <b>data</b>, но если делать это через обычное <b>=</b>, то тогда сохраняется реактивность.</p>
      </div>

      <!-- TimweWeb -->
      <div id="block-5" class="mb-4 block">
        <h2 class="text-xl font-bold mb-2">TimeWeb</h2>
        <ul>
          <li class="italic cursor-pointer text-blue-900"><a href="#header-p-5-1">> composer require</a></li>
          <li class="italic cursor-pointer text-blue-900"><a href="#header-p-5-2">> composer update</a></li>
          <li class="italic cursor-pointer text-blue-900"><a href="#header-p-5-3">> Установка сайта на Laravel</a></li>
        </ul>

        <h3 id="header-p-5-1" class="block-submenu-item mt-10">▼ composer require</h3>
        <p id="p-5-2" class="mb-2 codeExample">
          php ../../composer2/composer.phar require
        </p>

        <h3 id="header-p-5-2" class="block-submenu-item mt-10">▼ composer update</h3>
        <p id="p-5-2" class="mb-2 codeExample">
          php -d memory_limit=-1 $(which composer) update
        </p>

        
        <h3 id="header-p-5-3" class="block-submenu-item mt-10">▼ Установка сайта на Laravel</h3>
        <p id="p-5-3" class="mb-2">
          1. Сделать symlink root\public_html -> root\public<br>
          2. Сделать symlink root\public\storage -> root\storage<br>
          3. Сделать composer update<br>
          4. Убедиться что в настройках сайта установлена версия PHP соответствующая той на которой делался сайт (или выше)<br><br>

          Команда для symlink public_html <br>
          ln -s ~/имя_директории/public ~/имя_директории/public_html<br><br>

          Команда для symlink storage<br>
          ln -s ~/имя_директории/storage ~/имя_директории/public/storage<br><br>

          Команда для обновления composer (без лимита на память)<br>
          php -d memory_limit=-1 `which composer` update<br><br>

          В КОДЕ ВЕЗДЕ СЛЭШ ДОЛЖЕН БЫТЬ ТОЛЬКО ВОТ ТАКИМ "/" !!!!
        </p>
      </div>

      <!-- Telegram -->
      <div id="block-6" class="mb-4 block">
        <h2 class="text-xl font-bold mb-2">Telegram</h2>
        <ul>
          <li class="italic cursor-pointer text-blue-900"><a href="#header-p-6-1">> Установить webhook</a></li>
          <li class="italic cursor-pointer text-blue-900"><a href="#header-p-6-2">> Проверить webhook</a></li>
        </ul>
        <h3 id="header-p-6-1" class="block-submenu-item mt-10">▼ Установить webhook</h3>
        <p id="p-6-1" class="mb-2 codeExample">
          https://api.telegram.org/bot{TOKEN}/setWebhook?url={WEBHOOK URL}
        </p>
        <h3 id="header-p-6-2" class="block-submenu-item mt-10">▼ Проверить webhook</h3>
        <p id="p-6-2" class="mb-2 codeExample">
          https://api.telegram.org/bot{TOKEN}/getWebhookInfo
        </p>
      </div>

      <!-- GitHub -->
      <div id="block-6" class="mb-4 block">
        <h2 class="text-xl font-bold mb-2">GitHub</h2>
        <ul>
          <li class="italic cursor-pointer text-blue-900"><a href="#header-p-7-1">> git clone на ssh через personal token</a></li>
        </ul>
        <h3 id="header-p-7-1" class="block-submenu-item mt-10">▼ git clone на ssh через personal token</h3>
        <p id="p-7-1" class="mb-2">
          Для git clone на VDS'ке нужно использовать Access Token (Classic), а не Fine-Grained. Fine-Grained почему-то не работает через https и выдаёт вот такую ошибку <b>remote: Write access to repository not granted то нужно использ</b>
        </p>
      </div>

            
      <!-- JS -->
      <div id="block-3" class="mb-4 block">
        <h2 class="text-xl font-bold mb-2">JavaScript</h2>
        <ul>
          <li class="italic cursor-pointer text-blue-900">
            <a href="#header-p-8-1">> разница между функциями и функциональными выражениями</a>
          </li>
          <li class="italic cursor-pointer text-blue-900">
            <a href="#header-p-8-2">> значения по умолчанию в функциях</a>
          </li>
          <li class="italic cursor-pointer text-blue-900">
            <a href="#header-p-8-2">> стрелочная функция и область видимости this</a>
          </li>
          <li class="italic cursor-pointer text-blue-900">
            <a href="#header-p-8-2">> копирование и объединение массивов (оператор распространения)</a>
          </li>
        </ul>
        <h3 id="header-p-8-1" class="block-submenu-item mt-10">▼ разница между функциями и функциональными выражениями</h3>
        <p id="p-3-1" class="mb-2">Вот это функция</p>
        <p class="codeExample">function name() { ... }</p>
        <p id="p-3-1" class="mb-2">А это функциональное выражение</p>
        <p class="codeExample">const name = function () { ... }</p>
        <p>Функции записываются в память. Функциональные выражения – нет. Таким образом функцию можно вызывать из любого места в скрипте, ещё до её объявления. А функциональное выражение – нет.</p>
        
        <h3 id="header-p-8-2" class="block-submenu-item mt-10">▼ значения по умолчанию в функциях</h3>
        <p id="p-7-1" class="mb-2">Значение по умолчанию записывается вот так</p>
        <p class="codeExample">function name (param, <i>defaultParam = value)</i></p>

        <h3 id="header-p-8-3" class="block-submenu-item mt-10">▼ стрелочные функции и область видимости this</h3>
        <p id="p-7-1" class="mb-2">Стрелочные функции можно использовать для защиты области видимости this. Например когда this вызывается внутри метода объекта. Пример есть в учебнике <i>Алекс Бэнкс - React, стр. 31</i></p>

        <h3 id="header-p-8-3" class="block-submenu-item mt-10">▼ копирование и объединение массивов (оператор распространения - ...)</h3>
        <p id="p-7-1" class="mb-2">Для копирования и объединения массивов можно использовать оператор распространения ...</i></p>
        <p class="codeExample">
          <span class="comment">//объединение</span><br>
          const merge = [...array1, ...array2]<br><br>
          <span class="comment">//получение первого элемента через копирование</span><br>
          const firstElement = [...array1].reverse()
        </p>

      </div>

      <!-- CSS -->
      <div id="block-6" class="mb-4 block">
        <h2 class="text-xl font-bold mb-2">CSS</h2>
        <ul>
          <li class="italic cursor-pointer text-blue-900"><a href="#header-p-9-1">> margin у anchor'ов</a></li>
        </ul>
        <h3 id="header-p-9-1" class="block-submenu-item mt-10">▼ margin у anchor'ов</h3>
        <p id="p-9-1" class="mb-2 codeExample">
            .class { scroll-margin-top: 100px; }<br>
            <span class="comment">//принимает только значение в px</span>
        </p>
      </div>
  


    </div>

  </div>

  <script>
// Get the main menu element
const mainMenu = document.getElementById('main-menu');

// Get all the blocks on the page
const blocks = document.querySelectorAll('[id^=block-]');

// Create an array to store the menu items
const menuItems = [];

// Create the dynamic menu items based on the headers from the blocks
blocks.forEach((block, index) => {
  const header = block.querySelector('h2');
  const menuItem = document.createElement('a'); // Change the element to an anchor
  menuItem.classList.add('menu-item');
  menuItem.textContent = header.textContent;
  menuItem.href = `#${block.id}`; // Set the href to the corresponding block's ID
  menuItems.push(menuItem); // Push the menu item to the array
});

// Sort the menu items alphabetically
menuItems.sort((a, b) => {
  return a.textContent.localeCompare(b.textContent);
});

// Append the sorted menu items to the main menu
menuItems.forEach(menuItem => {
  mainMenu.appendChild(menuItem);
});

// Scroll to the corresponding block when a menu item is clicked
mainMenu.addEventListener('click', (event) => {
  if (event.target.tagName === 'A') {
    event.preventDefault(); // Prevent the default anchor behavior
    const targetBlockId = event.target.getAttribute('href').substring(1); // Get the target block ID from the href attribute
    const targetBlock = document.getElementById(targetBlockId);
    targetBlock.scrollIntoView({ behavior: 'smooth' }); // Scroll to the target block
  }
});


    function rearrangeBlocks() {
      const container = document.getElementById('container');
      const blocks = Array.from(container.getElementsByClassName('block'));

      blocks.sort((a, b) => {
        const headingA = a.getElementsByTagName('h2')[0].innerText.toUpperCase();
        const headingB = b.getElementsByTagName('h2')[0].innerText.toUpperCase();
        if (headingA < headingB) {
          return -1;
        } else if (headingA > headingB) {
          return 1;
        }
        return 0;
      });

      blocks.forEach(block => container.appendChild(block));
    }

    window.addEventListener('DOMContentLoaded', rearrangeBlocks);

  </script>
</body>
</html>
